<Window x:Class="TeraCyteViewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF"
        Title="TeraCyte Live Image Viewer" Height="1600" Width="1600"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">
    
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        
        <Style x:Key="StatusTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="TextAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,5"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#333333"/>
        </Style>
        
        <Style x:Key="ResultCardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.1" BlurRadius="4"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="HistoryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#1976D2"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1565C0"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="StopButtonStyle" TargetType="Button" BasedOn="{StaticResource HistoryButtonStyle}">
            <Setter Property="Background" Value="#D32F2F"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#B71C1C"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="RefreshButtonStyle" TargetType="Button" BasedOn="{StaticResource HistoryButtonStyle}">
            <Setter Property="Background" Value="#FF9800"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F57C00"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="MetricCardStyle" TargetType="Border">
            <Setter Property="Background" Value="#F8F9FA"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
            <Setter Property="BorderBrush" Value="#E9ECEF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Gray" Direction="270" ShadowDepth="1" Opacity="0.1"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Animation for new data -->
        <Storyboard x:Key="NewDataAnimation">
            <DoubleAnimation Storyboard.TargetName="NewDataIndicator" 
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.3"/>
        </Storyboard>
        
        <!-- Fade-in animation for new image -->
        <Storyboard x:Key="ImageFadeInAnimation">
            <DoubleAnimation Storyboard.TargetName="MicroscopeImage"
                             Storyboard.TargetProperty="Opacity"
                             From="0.8" To="1" Duration="0:0:0.8">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        
        <!-- Pulse animation for results -->
        <Storyboard x:Key="ResultsPulseAnimation">
            <DoubleAnimation Storyboard.TargetName="ResultsSection"
                             Storyboard.TargetProperty="Opacity"
                             From="1" To="0.7" Duration="0:0:0.3" AutoReverse="True" RepeatBehavior="2x">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        

        
        <!-- Glow effect for new data -->
        <Storyboard x:Key="GlowAnimation">
            <DoubleAnimation Storyboard.TargetName="GlowEffect"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="0.6" Duration="0:0:0.6" AutoReverse="True" RepeatBehavior="2x">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        
        <!-- Style for new data indicators -->
        <Style x:Key="NewDataIndicatorStyle" TargetType="Border">
            <Setter Property="Background" Value="#4CAF50"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Opacity" Value="0"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#4CAF50" BlurRadius="8" ShadowDepth="0" Opacity="0"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Style for data cards with new data -->
        <Style x:Key="NewDataCardStyle" TargetType="Border" BasedOn="{StaticResource ResultCardStyle}">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="3" Opacity="0.3" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Style for new data cards with background highlight -->
        <Style x:Key="HighlightedCardStyle" TargetType="Border" BasedOn="{StaticResource ResultCardStyle}">
            <Setter Property="Background" Value="#E8F5E8"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#4CAF50" Direction="270" ShadowDepth="3" Opacity="0.4" BlurRadius="10"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Header Section -->
        <Border Grid.Row="0" Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Text="🧬 TeraCyte Live Image Viewer" 
                               FontSize="24" FontWeight="Bold" 
                               HorizontalAlignment="Center" 
                               Foreground="#2E7D32"/>
                    
                    <Grid>
                        <TextBlock x:Name="StatusText"
                                   Style="{StaticResource StatusTextStyle}"
                                   Text="{Binding StatusMessage}" />

                         <!-- New data indicator -->
                         <Border x:Name="NewDataIndicator"
                                 Background="#4CAF50"
                                 CornerRadius="4"
                                 Padding="8,4"
                                 HorizontalAlignment="Right"
                                 VerticalAlignment="Center"
                                 Margin="0,0,10,0"
                                 Opacity="0"
                                 Visibility="{Binding ShowNewDataIndicator, Converter={StaticResource BooleanToVisibilityConverter}}">
                             <TextBlock Text="🆕 NEW DATA" 
                                        Foreground="White" 
                                        FontSize="10" 
                                        FontWeight="Bold"/>
                         </Border>
                    </Grid>
                    
                    <!-- Control buttons -->
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Center" 
                                Margin="0,10,0,0">
                        <Button Content="▶️ Start Monitoring"
                                Command="{Binding StartMonitoringCommand}"
                                Style="{StaticResource HistoryButtonStyle}"
                                Margin="0,0,10,0"
                                Padding="15,8"/>
                        <Button Content="⏹️ Stop Monitoring"
                                Command="{Binding StopMonitoringCommand}"
                                Style="{StaticResource StopButtonStyle}"
                                Margin="0,0,10,0"
                                Padding="15,8"/>
                        <Button Content="🔄 Refresh"
                                Command="{Binding RefreshCommand}"
                                Style="{StaticResource RefreshButtonStyle}"
                                Margin="0,0,10,0"
                                Padding="15,8"/>
                    </StackPanel>
                </StackPanel>
                
                <Button Grid.Column="1" 
                        x:Name="HistoryButton"
                        Content="📚 History"
                        Style="{StaticResource HistoryButtonStyle}"
                        Command="{Binding ShowHistoryCommand}"
                        VerticalAlignment="Center"/>
            </Grid>
        </Border>
        
        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Top Row: Image and Results (הכי חשוב) -->
            <Grid Grid.Row="0" Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.4*"/>
                    <ColumnDefinition Width="0.6*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Image Section -->
                <Border Grid.Column="0"
                        Background="White" 
                        CornerRadius="8" 
                        Padding="10" 
                        Margin="0,0,5,0">
                    <StackPanel>
                        <TextBlock Text="🔬 Microscope Image" 
                                   FontSize="18" FontWeight="SemiBold" 
                                   Margin="0,0,0,10" 
                                   Foreground="#1976D2"/>
                        
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="4" 
                                Background="#FAFAFA" Padding="2">
                            <Grid>
                                <Image x:Name="MicroscopeImage"
                                       Height="280"
                                       Width="400"
                                       Stretch="Uniform"
                                       RenderOptions.BitmapScalingMode="HighQuality"
                                       Source="{Binding CurrentImage}"/>
                                
                                <!-- New data glow effect -->
                                <Border x:Name="GlowEffect"
                                        Background="#4CAF50"
                                        CornerRadius="4"
                                        Opacity="0"
                                        Margin="-2"
                                        Visibility="{Binding ShowImageNewIndicator, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <Border.Effect>
                                        <BlurEffect Radius="10"/>
                                    </Border.Effect>
                                </Border>
                                
                                <!-- Loading overlay -->
                                <Border x:Name="ImageLoadingOverlay"
                                        Background="#80000000"
                                        CornerRadius="4"
                                        Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock Text="⏳ Loading..." 
                                                   Foreground="White" 
                                                   FontSize="16" 
                                                   FontWeight="Bold"
                                                   HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>
                
                <!-- Analysis Results Section -->
                <Border Grid.Column="1"
                        x:Name="ResultsSection"
                        Background="White" 
                        CornerRadius="8" 
                        Padding="10" 
                        Margin="5,0,0,0">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="📊 Analysis Results" 
                                       FontSize="18" FontWeight="SemiBold" 
                                       Margin="0,0,0,10" 
                                       Foreground="#1976D2"/>
                            
                            <!-- Classification Result -->
                            <Border Background="#F8F9FA" CornerRadius="6" Padding="12" Margin="0,0,0,10">
                                <StackPanel>
                                    <TextBlock Text="🎯 Classification" 
                                               FontSize="14" 
                                               FontWeight="SemiBold"
                                               Foreground="#1976D2"
                                               Margin="0,0,0,10"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Status" 
                                                       FontSize="11" 
                                                       Foreground="#666666"/>
                                            <TextBlock x:Name="ClassificationText"
                                                       Text="{Binding ClassificationLabel}" 
                                                       FontSize="24" 
                                                       FontWeight="Bold" 
                                                       Foreground="{Binding ClassificationColor}"/>
                                        </StackPanel>
                                        
                                        <Border Grid.Column="1" 
                                                Background="{Binding ClassificationColor}" 
                                                CornerRadius="4" 
                                                Padding="8,4" 
                                                VerticalAlignment="Center">
                                            <TextBlock Text="●" 
                                                       Foreground="White" 
                                                       FontSize="8" 
                                                       FontWeight="Bold"/>
                                        </Border>
                                    </Grid>
                                </StackPanel>
                            </Border>
                            
                            <!-- Additional Analysis Information -->
                            <Border Background="#F8F9FA" CornerRadius="6" Padding="12" Margin="0,0,0,10">
                                <StackPanel>
                                    <TextBlock Text="📋 Image Details" 
                                               FontSize="14" 
                                               FontWeight="SemiBold"
                                               Foreground="#1976D2"
                                               Margin="0,0,0,10"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Image Quality" 
                                                       FontSize="11" 
                                                       Foreground="#666666"/>
                                            <TextBlock Text="{Binding ImageQuality}" 
                                                       FontSize="14" 
                                                       FontWeight="Bold"
                                                       Foreground="#4CAF50"/>
                                        </StackPanel>
                                        
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="Processing Time" 
                                                       FontSize="11" 
                                                       Foreground="#666666"/>
                                            <TextBlock Text="{Binding ProcessingTime}" 
                                                       FontSize="14" 
                                                       FontWeight="Bold"
                                                       Foreground="#FF9800"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                            
                            <!-- Analysis Metrics -->
                            <Border Background="#F8F9FA" CornerRadius="6" Padding="12" Margin="0,0,0,10">
                                <StackPanel>
                                    <TextBlock Text="📊 Analysis Metrics" 
                                               FontSize="14" 
                                               FontWeight="SemiBold"
                                               Foreground="#1976D2"
                                               Margin="0,0,0,10"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Focus Score" 
                                                       FontSize="11" 
                                                       Foreground="#666666"/>
                                            <TextBlock Text="{Binding FocusScore, StringFormat='{}{0:F2}'}" 
                                                       FontSize="14" 
                                                       FontWeight="Bold"
                                                       Foreground="#9C27B0"/>
                                        </StackPanel>
                                        
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="Intensity Average" 
                                                       FontSize="11" 
                                                       Foreground="#666666"/>
                                            <TextBlock Text="{Binding IntensityAverage, StringFormat='{}{0:F2}'}" 
                                                       FontSize="14" 
                                                       FontWeight="Bold"
                                                       Foreground="#FF5722"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                            
                            <!-- Confidence Metrics -->
                            <Border Background="#F8F9FA" CornerRadius="6" Padding="12" Margin="0,0,0,10">
                                <StackPanel>
                                    <TextBlock Text="🎯 Confidence Metrics" 
                                               FontSize="14" 
                                               FontWeight="SemiBold"
                                               Foreground="#1976D2"
                                               Margin="0,0,0,10"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Detection Confidence" 
                                                       FontSize="11" 
                                                       Foreground="#666666"/>
                                            <TextBlock Text="{Binding DetectionConfidence}" 
                                                       FontSize="14" 
                                                       FontWeight="Bold"
                                                       Foreground="#2E7D32"/>
                                        </StackPanel>
                                        
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="Analysis Accuracy" 
                                                FontSize="11" 
                                                Foreground="#666666"/>
                                            <TextBlock Text="{Binding AnalysisAccuracy}" 
                                                FontSize="14" FontWeight="Bold"
                                                Foreground="#1976D2"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                            
                            <!-- Status Information -->
                            <Border Background="#F8F9FA" CornerRadius="6" Padding="12" Margin="0,0,0,10">
                                <StackPanel>
                                    <TextBlock Text="📡 System Status" 
                                               FontSize="14" 
                                               FontWeight="SemiBold"
                                               Foreground="#1976D2"
                                               Margin="0,0,0,10"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Connection" 
                                                       FontSize="11" 
                                                       Foreground="#666666"/>
                                            <TextBlock Text="{Binding ConnectionStatus}" 
                                                       FontSize="14" 
                                                       FontWeight="Bold"
                                                       Foreground="#4CAF50"/>
                                        </StackPanel>
                                        
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="Last Update" 
                                                       FontSize="11" 
                                                       Foreground="#666666"/>
                                            <TextBlock Text="{Binding LastUpdateTime, StringFormat='{}{0:mm\\:ss} ago'}" 
                                                       FontSize="14" 
                                                       FontWeight="Bold"
                                               Foreground="#FF9800"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Grid>
            
            <!-- Bottom Row: Chart and Statistics (פחות חשוב) -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.6*"/>
                    <ColumnDefinition Width="0.4*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Histogram Chart Section -->
                <Border Grid.Column="0"
                        Background="White" 
                        CornerRadius="8" 
                        Padding="10" 
                        Margin="0,0,5,0">
                    <StackPanel>
                        <TextBlock Text="📈 Intensity Histogram" 
                                   FontSize="18" FontWeight="SemiBold" 
                                   Margin="0,0,0,10" 
                                   Foreground="#1976D2"/>
                        
                        <!-- Chart -->
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="4" 
                                Background="#FAFAFA" Padding="10">
                            <lvc:CartesianChart x:Name="HistogramChart"
                                                Height="180"
                                                Margin="0,5,0,0"
                                                Series="{Binding HistogramSeries}"/>
                        </Border>
                    </StackPanel>
                </Border>
                
                <!-- Histogram Statistics Section -->
                <Border Grid.Column="1"
                        Background="White" 
                        CornerRadius="8" 
                        Padding="10" 
                        Margin="5,0,0,0">
                    <StackPanel>
                        <TextBlock Text="📊 Histogram Statistics" 
                                   FontSize="18" FontWeight="SemiBold" 
                                   Margin="0,0,0,10" 
                                   Foreground="#1976D2"/>
                        
                        <!-- Main Statistics Row -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Total Values" 
                                           FontSize="12" 
                                           Foreground="#666666"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="TotalValuesText"
                                           Text="{Binding TotalValues}" 
                                           FontSize="16" 
                                           FontWeight="Bold"
                                           Foreground="#2E7D32"
                                           HorizontalAlignment="Center"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="10,0">
                                <TextBlock Text="Max Value" 
                                           FontSize="12" 
                                           Foreground="#666666"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="MaxValueText"
                                           Text="{Binding MaxValue}" 
                                           FontSize="16" 
                                           FontWeight="Bold"
                                           Foreground="#D32F2F"
                                           HorizontalAlignment="Center"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2" Margin="10,0">
                                <TextBlock Text="Average" 
                                           FontSize="12" 
                                           Foreground="#666666"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="AverageText"
                                           Text="{Binding AverageValue}" 
                                           FontSize="16" 
                                           FontWeight="Bold"
                                           Foreground="#1976D2"
                                           HorizontalAlignment="Center"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="3" Margin="10,0,0,0">
                                <TextBlock Text="Non-Zero" 
                                           FontSize="12" 
                                           Foreground="#666666"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="NonZeroText"
                                           Text="{Binding NonZeroCount}" 
                                           FontSize="16" 
                                           FontWeight="Bold"
                                           Foreground="#FF9800"
                                           HorizontalAlignment="Center"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Grid>
                        
                        <!-- Additional Statistics Row -->
                        <Grid Margin="0,15,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Min Value" 
                                           FontSize="12" 
                                           Foreground="#666666"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="MinValueText"
                                           Text="{Binding MinValue}" 
                                           FontSize="16" 
                                           FontWeight="Bold"
                                           Foreground="#9C27B0"
                                           HorizontalAlignment="Center"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="10,0">
                                <TextBlock Text="Median" 
                                           FontSize="12" 
                                           Foreground="#666666"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="MedianValueText"
                                           Text="{Binding MedianValue}" 
                                           FontSize="16" 
                                           FontWeight="Bold"
                                           Foreground="#607D8B"
                                           HorizontalAlignment="Center"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2" Margin="10,0,0,0">
                                <TextBlock Text="Std Dev" 
                                           FontSize="12" 
                                           Foreground="#666666"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="StandardDeviationText"
                                           Text="{Binding StandardDeviation}" 
                                           FontSize="16" 
                                           FontWeight="Bold"
                                           Foreground="#795548"
                                           HorizontalAlignment="Center"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</Window> 